## **优先队列(堆)**

1. 定义:
    优先队列是计算机科学中的一类抽象数据类型.
    优先队列中的每个元素都有各自的优先级, 优先级最高的元素最先得到服务;
    优先级相同的元素按照其在优先队列中的顺序得到服务.
    优先队列往往用堆来实现.
    
2. 模型
    - 操作: 
        - insert(插入) -- 等价于enqueue(入队)
        - deleteMin(删除最小者) -- dequeue(出队)
        - 其他(非基本模型操作)
        
3. 实现
    - 思路:
        - 简单链表, 插入O(1), 删除O(N), 删除时需要遍历
        - 简单链表, 插入O(N), 删除O(1), 插入时排序
        - 二叉查找树,插入,删除均为O(log N)
        - 二叉堆
        
### **二叉堆**(binary heap)

1. 定义: 堆是一颗被完全填满的二叉树, 有可能的例外是在底层, 底层撒花姑娘的元素从左到右填入. 这样的树成为完全二叉树.
    - 图例
        <p align="center">
            <img src="https://github.com/mmflys/data-sturcture/blob/master/info/graph/binaryHeap.png">
            <p align="center">一颗完全二叉树</p>
        </p>
            
2. 结构性质
    - 表示形式: 完全二叉树可由一个数组表示而不需要使用链.
        - 图例
            <p align="center">
                <img src="https://github.com/mmflys/data-sturcture/blob/master/info/graph/binaryHeapArray.png">
                <p align="center">完全二叉树的数组实现</p>
            </p>
        - 性质(对于数组中位置i上的元素)
            - 左儿子在2i位置上
            - 右儿子在(2i+1)位置上
            - 父节点在i/2(向下取整)位置上
    - 结论: 一个堆结构将由一个(Comparable对象的)数组和一个代表当前堆的大小的整数组成.

3. 堆序性质
    - 在一个堆中, 对于每一个节点X, X的父节点中的关键字小于(或等于)X中的关键字, 根节点除外(没有父亲).
    
4. 基本操作
    - `insert`(插入)
        - 策略: `上滤`(percolate up)
        - 步骤
            - 找到下一个可用位置创建一个空穴
            - 若插入值满足堆序性质, 则直接插入, 结束插入
            - 若插入值不满足堆序性质, 足则移动空穴的父节点到空穴, 准备插入到原父节点位置
            - 重复以上步骤直到满足堆序性质, 则结束
        - 最大时间复杂度: O(log N)
    -  `deleteMin`(删除最小元素)
        - 策略: `下滤`(percolate down)
        - 步骤
            - 删除跟节点,留下一个空穴
            - 若最后一个节点可以直接放入空穴,则结束
            - 若最后一个节点不能直接放入空穴(不满足堆序性质), 则移动原空穴处节点的较小的子节点到空穴, 留下一个空穴
            - 依次在子树重复以上步骤, 直到最后一个节点可以直接放入空穴, 则结束
        - 最大时间复杂度: O(log N)

5. 其他操作
    - `decreaseKey(p, △)`: 降低关键字的值
        - 解释: decreaseKey操作降低在位置p处的项的值,降值的复读为正的量△. 由于这可能破坏堆序性质, 因此必须通过上滤对堆进行调整.
        - 应用: 对系统管理员是有用的, 管理员能够使他的程序以最高的优先级来运行.
    - `increaseKey(p, △)`: 增加关键字的值
        - 解释: increaseKey操作增加在位置p处的项的值, 增值的幅度为正的量△. 这可以用下滤来完成.
        - 应用: 许多调度程序自动地降低正在过多消耗CPU时间的进程的优先级.
    - `delete(p)`: 删除
        - 解释: delete操作删除堆中位置p上的节点. 该操作通过首先执行decreaseKey(p, ∞)然后再执行deleteMin()来完成.
        - 应用: 当一个进程被用户中止(而不是正常终止时),它必须从优先队列中出去.
    - `buildHeap`: 构建堆
        - 背景: 二叉堆是由一些项的初始集合构造而得
        - 算法: 将N项以任意顺序放入树中, 保证结构特性, 然后用percolateDown(i)从节点i下滤, 知道i为根节点序号.
        
6. 应用
    - 选择问题: 找出N个元素中第k个最大的元素
    - 算法: 
        - 数组全排序: 插入数组并排序, 取出第k个最大的元素
            - 时间复杂度: O(N^2)
        - 数组k排序: 插入k个元素并排序, 再将剩余元素插入
            - 时间复杂度: O(N*K)
        - buildHeap-deleteMin: 读入N个数到数组, 然后对数组应用buildHeap算法, 最后执行k次deleteMin操作, 最后提取的元素即是目标答案
            - 时间发咋读: O(N log N)
        - 